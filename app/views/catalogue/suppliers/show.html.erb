<div class="p-10">
  <h2>Showing Products for <%= @supplier.name %></h2>
  <br />
  <div class="accordion" id="accordionExample">
    <% @products.each do |product| %>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <% collapse_target = "#collapse#{product.sku_code}" %>
          <% collapse_id = "collapse#{product.sku_code}" %>
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target=<%= collapse_target %> aria-expanded="false" aria-controls=<%= collapse_id %>>
            <h6>
              <%= product.title %>
            </h6>
          </button>
        </h2>
        <div id=<%= collapse_id %> class="accordion-collapse" data-bs-parent="#accordionExample">
          <div class="accordion-body">
            <table class="min-w-full table-auto">
              <thead>
                <tr>
                  <th>SKU Code</th>
                  <th colspan="2">Description / Variants</th>
                  <th>Quantity</th>
                  <th colspan="3"></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><%= product.display_sku %></td>
                  <td colspan="2"><%= product.description %></td>
                  <td><%= product.stock_count %></td>
                  <td colspan="3">
                    <%= link_to "Edit Product", new_catalogue_supplier_product_path(@supplier.id), class: "btn btn-primary" %>
                    <%= link_to "Add Variants", new_catalogue_supplier_product_variant_path(@supplier.id, product.id), class: "btn btn-secondary" %>
                    <%= link_to "Remove Product", catalogue_suppliers_path(@supplier.id), class: "btn btn-outline-secondary" %>
                  </td>
                </tr>
                <tr><td colspan="7">&nbsp;</td></tr>
                <% if product.variants.any? %>
                  <% product.variants.each do |variant| %>
                    <tr>
                      <td><%= variant.sku_code %></td>
                      <td colspan="2"><%= variant.display_characteristics %></td>
                      <td><%= variant.stock_count %></td>
                      <td colspan="3">
                        <%= link_to "Edit Variant", root_path(@supplier.id) %>
                        &nbsp; &nbsp;
                        <%= link_to "Remove Variant", root_path(@supplier.id) %>
                      </td>
                    </tr>
                  <% end %>
                <% else %>
                  <tr><td>There are no variants for this product yet.</td></tr>
                <% end %>
              </tbody>
            </table>

          </div>
        </div>
      </div>
    <% end %>
  </div>

  <br />
  <%= link_to "Create New Product", new_catalogue_supplier_product_path(@supplier.id), class: "btn btn-primary" %>
  <%= link_to "Select another Supplier", catalogue_suppliers_path(@supplier.id), class: "btn btn-outline-secondary" %>
  <%= link_to "Back to Catalogue", catalogue_index_path(@supplier.id), class: "btn btn-outline-secondary" %>
</div>